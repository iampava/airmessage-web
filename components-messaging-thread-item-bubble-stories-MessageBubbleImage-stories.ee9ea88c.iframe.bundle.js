"use strict";(self.webpackChunkairmessage_react=self.webpackChunkairmessage_react||[]).push([[1789],{"./src/components/messaging/thread/item/bubble/stories/MessageBubbleImage.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MessageBubbleImage:()=>MessageBubbleImage,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_MessageBubbleImage__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/messaging/thread/item/bubble/MessageBubbleImage.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"components/messaging/bubble",component:_MessageBubbleImage__WEBPACK_IMPORTED_MODULE_2__.Z},Template=args=>{const[blob,setBlob]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{fetch("https://picsum.photos/200/300").then((resp=>resp.blob())).then((respBlob=>setBlob(respBlob)))}),[]),blob?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_MessageBubbleImage__WEBPACK_IMPORTED_MODULE_2__.Z,{...args,data:blob}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:" loading "})};Template.displayName="Template";const MessageBubbleImage=Template.bind({});MessageBubbleImage.args={name:"Bubble Image",flow:{anchorBottom:!0,backgroundColor:"action.light",color:"action.main",isOutgoing:!1,isUnconfirmed:!0,anchorTop:!1},stickers:[],tapbacks:[],type:"jpg"},MessageBubbleImage.parameters={...MessageBubbleImage.parameters,docs:{...MessageBubbleImage.parameters?.docs,source:{originalSource:'args => {\n  const [blob, setBlob] = useState<Blob | null>(null);\n  useEffect(() => {\n    fetch("https://picsum.photos/200/300").then(resp => resp.blob()).then(respBlob => setBlob(respBlob));\n  }, []);\n  if (!blob) {\n    return <> loading </>;\n  }\n  return <MessageBubbleImageComponent {...args} data={blob} />;\n}',...MessageBubbleImage.parameters?.docs?.source}}};const __namedExportsOrder=["MessageBubbleImage"]},"./src/components/messaging/thread/item/bubble/MessageBubbleImage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>MessageBubbleImage});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),shared_components_messaging_thread_item_bubble_MessageBubbleWrapper__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/components/messaging/thread/item/bubble/MessageBubbleWrapper.tsx"),_mui_material__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mui/material/esm/styles/styled.js"),_mui_material__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@mui/material/esm/Backdrop/Backdrop.js"),_mui_material__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@mui/material/esm/Toolbar/Toolbar.js"),_mui_material__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@mui/material/esm/IconButton/IconButton.js"),_mui_material__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),_mui_material__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@mui/material/esm/Tooltip/Tooltip.js"),_mui_material__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),_mui_material__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@mui/material/esm/ButtonBase/ButtonBase.js"),shared_util_messageFlow__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/util/messageFlow.ts"),shared_util_hookUtils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/util/hookUtils.ts"),_mui_material_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/esm/styles/createTheme.js"),_mui_material_styles__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mui/system/esm/ThemeProvider/ThemeProvider.js"),shared_util_browserUtils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/util/browserUtils.ts"),_mui_icons_material__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@mui/icons-material/esm/ArrowBack.js"),_mui_icons_material__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@mui/icons-material/esm/SaveAlt.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ImagePreview=(0,_mui_material__WEBPACK_IMPORTED_MODULE_2__.ZP)("img")((({theme})=>({backgroundColor:theme.palette.background.sidebar,maxWidth:"100%"}))),lightboxTheme=(0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_3__.Z)({palette:{mode:"dark",messageIncoming:void 0,messageOutgoing:void 0,messageOutgoingTextMessage:void 0}});function MessageBubbleImage(props){const imageURL=(0,shared_util_hookUtils__WEBPACK_IMPORTED_MODULE_4__.vf)(props.data),[previewOpen,setPreviewOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),downloadAttachmentFile=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>{event.stopPropagation(),void 0!==imageURL&&(0,shared_util_browserUtils__WEBPACK_IMPORTED_MODULE_5__.U)(imageURL,props.type,props.name)}),[imageURL,props.type,props.name]),borderRadius=(0,shared_util_messageFlow__WEBPACK_IMPORTED_MODULE_6__.yh)(props.flow);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material_styles__WEBPACK_IMPORTED_MODULE_7__.Z,{theme:lightboxTheme,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.Z,{sx:{zIndex:theme=>theme.zIndex.modal,flexDirection:"column",alignItems:"stretch",backgroundColor:"rgba(0, 0, 0, 0.9)"},open:previewOpen,onClick:()=>setPreviewOpen(!1),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_9__.Z,{sx:{flexShrink:0},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.Z,{edge:"start",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_icons_material__WEBPACK_IMPORTED_MODULE_11__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_12__.Z,{flexGrow:1,variant:"h6",color:"textPrimary",children:props.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_13__.Z,{title:"Save",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.Z,{onClick:downloadAttachmentFile,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_icons_material__WEBPACK_IMPORTED_MODULE_14__.Z,{})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_15__.Z,{flexGrow:1,paddingLeft:8,paddingRight:8,paddingBottom:8,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_15__.Z,{sx:{width:"100%",height:"100%",backgroundImage:`url("${imageURL}")`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"}})})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(shared_components_messaging_thread_item_bubble_MessageBubbleWrapper__WEBPACK_IMPORTED_MODULE_16__.Z,{flow:props.flow,stickers:props.stickers,tapbacks:props.tapbacks,maxWidth:400,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_17__.Z,{style:{borderRadius},onClick:()=>setPreviewOpen(!0),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ImagePreview,{style:{borderRadius},src:imageURL,alt:""})})})]})}try{MessageBubbleImage.displayName="MessageBubbleImage",MessageBubbleImage.__docgenInfo={description:"A message bubble that displays an image thumbnail,\nand allows the user to enlarge the image by\nclicking on it",displayName:"MessageBubbleImage",props:{flow:{defaultValue:null,description:"",name:"flow",required:!0,type:{name:"MessagePartFlow"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ArrayBuffer | Blob"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},stickers:{defaultValue:null,description:"",name:"stickers",required:!0,type:{name:"StickerItem[]"}},tapbacks:{defaultValue:null,description:"",name:"tapbacks",required:!0,type:{name:"TapbackItem[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/messaging/thread/item/bubble/MessageBubbleImage.tsx#MessageBubbleImage"]={docgenInfo:MessageBubbleImage.__docgenInfo,name:"MessageBubbleImage",path:"src/components/messaging/thread/item/bubble/MessageBubbleImage.tsx#MessageBubbleImage"})}catch(__react_docgen_typescript_loader_error){}},"./src/util/browserUtils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function downloadBlob(data,type,name){const blobURL=URL.createObjectURL(data);downloadURL(blobURL,type,name),URL.revokeObjectURL(blobURL)}function downloadURL(url,type,name){const link=document.createElement("a");link.download=name,link.href=url,link.click(),link.remove()}__webpack_require__.d(__webpack_exports__,{U:()=>downloadURL,l:()=>downloadBlob})}}]);