"use strict";(self.webpackChunkairmessage_react=self.webpackChunkairmessage_react||[]).push([[2050],{"./src/components/messaging/detail/stories/DetailError.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DetailError:()=>DetailError_stories_DetailError,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DetailError_stories});var react=__webpack_require__("./node_modules/react/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),DetailError_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/messaging/detail/DetailError.module.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(DetailError_module.Z,options);const detail_DetailError_module=DetailError_module.Z&&DetailError_module.Z.locals?DetailError_module.Z.locals:void 0;var Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),TextField=__webpack_require__("./node_modules/@mui/material/esm/TextField/TextField.js"),WifiOffRounded=__webpack_require__("./node_modules/@mui/icons-material/esm/WifiOffRounded.js"),LockRounded=__webpack_require__("./node_modules/@mui/icons-material/esm/LockRounded.js"),stateCodes=__webpack_require__("./src/data/stateCodes.ts"),connectionManager=__webpack_require__("./src/connection/connectionManager.ts"),encryptionUtils=__webpack_require__("./src/util/encryptionUtils.ts"),secureStorageUtils=__webpack_require__("./src/util/secureStorageUtils.ts"),index_esm=__webpack_require__("./node_modules/firebase/auth/dist/index.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const buttonActionRetry={label:"Retry",onClick:connectionManager.$j};function DetailError(props){return(0,jsx_runtime.jsx)("div",{className:detail_DetailError_module.container,children:(0,jsx_runtime.jsx)("div",{className:detail_DetailError_module.main,children:props.error===stateCodes.nD.Unauthorized?(0,jsx_runtime.jsx)(DetailErrorAuth,{resetCallback:props.resetCallback}):(0,jsx_runtime.jsx)(DetailErrorMessage,{error:props.error,resetCallback:props.resetCallback})})})}function DetailErrorMessage(props){const errorDisplay=function errorCodeToDisplay(error){switch(error){case stateCodes.nD.Connection:case stateCodes.nD.Internet:return{title:"AirMessage can't be reached",subtitle:"Please check your internet connection and try again",buttonPrimary:buttonActionRetry};case stateCodes.nD.InternalError:return{title:errorTitleSystems,subtitle:"An internal error occurred while trying to connect",buttonPrimary:buttonActionRetry};case stateCodes.nD.ExternalError:return{title:errorTitleSystems,subtitle:"An external error occurred while trying to connect",buttonPrimary:buttonActionRetry};case stateCodes.nD.BadRequest:return{title:errorTitleSystems,subtitle:"A connection compatibility error occurred",buttonPrimary:buttonActionRetry};case stateCodes.nD.ClientOutdated:return{title:"AirMessage for web isn't compatible with your personal server",subtitle:"This version of AirMessage for web is out of date - please refresh the page and try again",buttonPrimary:{label:"Refresh",onClick:()=>{window.location.reload()}}};case stateCodes.nD.ServerOutdated:return{title:"AirMessage for web isn't compatible with your personal server",subtitle:"AirMessage Server is out of date - please update AirMessage Server on your Mac and try again",buttonPrimary:buttonActionRetry};case stateCodes.nD.Unauthorized:return{title:"Your password was not accepted",subtitle:"Please check your password and try again",buttonPrimary:buttonActionRetry};case stateCodes.nD.ConnectNoGroup:return{title:"Your personal server can't be reached",subtitle:"Please ensure that your Mac is turned on, connected to the internet, and is running AirMessage Server",buttonPrimary:buttonActionRetry};case stateCodes.nD.ConnectNoCapacity:return{title:"Too many devices are connected",subtitle:"You've reached your limit of connected devices. Please disconnect some other AirMessage devices from your account to continue.",buttonPrimary:buttonActionRetry};case stateCodes.nD.ConnectAccountValidation:return{title:"Your account details couldn't be processed",subtitle:"Please sign out of AirMessage for web and sign back in",buttonPrimary:{label:"Sign out",onClick:()=>{(0,index_esm.w7)((0,index_esm.v0)())}}};case stateCodes.nD.ConnectNoActivation:return{title:"Your account isn't activated",subtitle:"Unfortunately, AirMessage Cloud is not accepting new users at this moment. Please try again later."};case stateCodes.nD.ConnectOtherLocation:return{title:"A change was detected in your server computer",subtitle:"Please try connecting again in a few moments",buttonPrimary:buttonActionRetry}}}(props.error);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(WifiOffRounded.Z,{className:detail_DetailError_module.icon}),(0,jsx_runtime.jsxs)("div",{className:detail_DetailError_module.split,children:[(0,jsx_runtime.jsx)(Typography.Z,{variant:"h4",gutterBottom:!0,children:errorDisplay.title}),(0,jsx_runtime.jsx)(Typography.Z,{color:"textSecondary",gutterBottom:!0,dangerouslySetInnerHTML:{__html:errorDisplay.subtitle}}),(0,jsx_runtime.jsxs)("div",{className:detail_DetailError_module.buttonRow,children:[errorDisplay.buttonPrimary&&(0,jsx_runtime.jsx)(Button.Z,{variant:"contained",disableElevation:!0,onClick:errorDisplay.buttonPrimary.onClick,children:errorDisplay.buttonPrimary.label}),errorDisplay.buttonSecondary&&(0,jsx_runtime.jsx)(Button.Z,{onClick:errorDisplay.buttonSecondary.onClick,children:errorDisplay.buttonSecondary.label}),props.resetCallback&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{flexGrow:1}}),(0,jsx_runtime.jsx)(Button.Z,{onClick:props.resetCallback,children:"Reconfigure"})]})]})]})]})}function DetailErrorAuth(props){const[password,setPassword]=(0,react.useState)(""),updatePassword=(0,react.useCallback)((event=>setPassword(event.target.value)),[setPassword]),[isLoading,setIsLoading]=(0,react.useState)(!1),confirm=(0,react.useCallback)((()=>{0!==password.trim().length&&(setIsLoading(!0),Promise.all([(0,encryptionUtils.Yt)(password),(0,secureStorageUtils.dk)(secureStorageUtils.uJ.ServerPassword,password)]).then(connectionManager.$j))}),[setIsLoading,password]),onKeyDown=(0,react.useCallback)((event=>{"Enter"===event.key&&confirm()}),[confirm]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LockRounded.Z,{className:detail_DetailError_module.icon}),(0,jsx_runtime.jsxs)("div",{className:detail_DetailError_module.split,children:[(0,jsx_runtime.jsx)(Typography.Z,{variant:"h4",gutterBottom:!0,children:"Server is password-protected"}),(0,jsx_runtime.jsx)(Typography.Z,{color:"textSecondary",gutterBottom:!0,children:"Please enter your server password"}),(0,jsx_runtime.jsx)(TextField.Z,{label:"Password",variant:"filled",type:"password",autoComplete:"current-password",margin:"normal",autoFocus:!0,value:password,onChange:updatePassword,onKeyDown}),(0,jsx_runtime.jsxs)("div",{className:`${detail_DetailError_module.buttonRow} ${detail_DetailError_module.buttonRowReverse}`,children:[(0,jsx_runtime.jsx)(Button.Z,{variant:"contained",disableElevation:!0,onClick:confirm,disabled:0===password.trim().length||isLoading,children:"Continue"}),props.resetCallback&&(0,jsx_runtime.jsx)(Button.Z,{onClick:props.resetCallback,children:"Reconfigure"})]})]})]})}DetailError.displayName="DetailError";const errorTitleSystems="An error occurred while connecting";try{DetailError.displayName="DetailError",DetailError.__docgenInfo={description:"",displayName:"DetailError",props:{error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"},{value:"7"},{value:"8"},{value:"9"},{value:"10"},{value:"11"},{value:"12"}]}},resetCallback:{defaultValue:null,description:"",name:"resetCallback",required:!1,type:{name:"VoidFunction"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/messaging/detail/DetailError.tsx#DetailError"]={docgenInfo:DetailError.__docgenInfo,name:"DetailError",path:"src/components/messaging/detail/DetailError.tsx#DetailError"})}catch(__react_docgen_typescript_loader_error){}const DetailError_stories={title:"components/messaging/details",component:DetailError},DetailError_stories_DetailError={args:{error:stateCodes.nD.BadRequest}};DetailError_stories_DetailError.parameters={...DetailError_stories_DetailError.parameters,docs:{...DetailError_stories_DetailError.parameters?.docs,source:{originalSource:"{\n  args: {\n    error: ConnectionErrorCode.BadRequest\n  }\n}",...DetailError_stories_DetailError.parameters?.docs?.source}}};const __namedExportsOrder=["DetailError"]},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/messaging/detail/DetailError.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".nrEZu_lC_xkjFe0HVANv {\n\theight: 100%;\n\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.fjwNgBHbnKkUlNFFengm {\n\tmargin: 16px;\n\tmax-width: 1000px;\n\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-start;\n\tjustify-content: center;\n}\n\n.I8_eJBt3DV5qNPRcRmPI {\n\tdisplay: flex;\n\tflex-direction: column;\n\n\tmargin-inline-start: 16px;\n}\n\n.XqO3mjn55u4qgcboYPZo {\n\twidth: 64px !important;\n\theight: 64px !important;\n}\n\n.WKJrLZ4numIBLtTksZKx {\n\tdisplay: flex;\n\tflex-direction: row;\n\n\tmargin-top: 12px;\n}\n\n.SvN_Aw1zEUnpKaIKxj5h {\n\tflex-direction: row-reverse;\n}\n\n.WKJrLZ4numIBLtTksZKx > button:not(:first-child) {\n\tmargin-left: 16px;\n}","",{version:3,sources:["webpack://./src/components/messaging/detail/DetailError.module.css"],names:[],mappings:"AAAA;CACC,YAAY;;CAEZ,aAAa;CACb,uBAAuB;CACvB,mBAAmB;AACpB;;AAEA;CACC,YAAY;CACZ,iBAAiB;;CAEjB,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,uBAAuB;AACxB;;AAEA;CACC,aAAa;CACb,sBAAsB;;CAEtB,yBAAyB;AAC1B;;AAEA;CACC,sBAAsB;CACtB,uBAAuB;AACxB;;AAEA;CACC,aAAa;CACb,mBAAmB;;CAEnB,gBAAgB;AACjB;;AAEA;CACC,2BAA2B;AAC5B;;AAEA;CACC,iBAAiB;AAClB",sourcesContent:[".container {\n\theight: 100%;\n\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.main {\n\tmargin: 16px;\n\tmax-width: 1000px;\n\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-start;\n\tjustify-content: center;\n}\n\n.split {\n\tdisplay: flex;\n\tflex-direction: column;\n\n\tmargin-inline-start: 16px;\n}\n\n.icon {\n\twidth: 64px !important;\n\theight: 64px !important;\n}\n\n.buttonRow {\n\tdisplay: flex;\n\tflex-direction: row;\n\n\tmargin-top: 12px;\n}\n\n.buttonRowReverse {\n\tflex-direction: row-reverse;\n}\n\n.buttonRow > button:not(:first-child) {\n\tmargin-left: 16px;\n}"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={container:"nrEZu_lC_xkjFe0HVANv",main:"fjwNgBHbnKkUlNFFengm",split:"I8_eJBt3DV5qNPRcRmPI",icon:"XqO3mjn55u4qgcboYPZo",buttonRow:"WKJrLZ4numIBLtTksZKx",buttonRowReverse:"SvN_Aw1zEUnpKaIKxj5h"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);