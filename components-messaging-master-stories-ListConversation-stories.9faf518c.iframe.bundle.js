"use strict";(self.webpackChunkairmessage_react=self.webpackChunkairmessage_react||[]).push([[2318],{"./src/components/messaging/master/stories/ListConversation.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ListConversation:()=>ListConversation,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _ListConversation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/messaging/master/ListConversation.tsx"),shared_data_stateCodes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/data/stateCodes.ts");const __WEBPACK_DEFAULT_EXPORT__={title:"components/messaging/master",component:_ListConversation__WEBPACK_IMPORTED_MODULE_0__.Z},ListConversation={args:{conversation:{guid:"uuid",localID:12,name:"Barbecue",localOnly:!1,preview:{date:new Date(Date.now()-864e5),attachments:[],text:"Preview text",type:shared_data_stateCodes__WEBPACK_IMPORTED_MODULE_1__.mZ.Message},members:["Jon Doe","Phil Daixtech"],service:"service",unreadMessages:!1}}};ListConversation.parameters={...ListConversation.parameters,docs:{...ListConversation.parameters?.docs,source:{originalSource:'{\n  args: {\n    conversation: {\n      guid: "uuid",\n      localID: 12,\n      name: "Barbecue",\n      localOnly: false,\n      preview: {\n        date: new Date(Date.now() - 24 * 60 * 60 * 1000),\n        attachments: [],\n        text: "Preview text",\n        type: ConversationPreviewType.Message\n      },\n      members: ["Jon Doe", "Phil Daixtech"],\n      service: "service",\n      unreadMessages: false\n    }\n  }\n}',...ListConversation.parameters?.docs?.source}}};const __namedExportsOrder=["ListConversation"]},"./src/components/messaging/master/ListConversation.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>ListConversation});__webpack_require__("./node_modules/react/index.js");var _util_conversationUtils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/util/conversationUtils.ts"),_mui_material__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/esm/ListItemButton/ListItemButton.js"),_mui_material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mui/material/esm/ListItemAvatar/ListItemAvatar.js"),_mui_material__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mui/material/esm/ListItemText/ListItemText.js"),_mui_material__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),_data_appleConstants__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/data/appleConstants.ts"),_util_dateUtils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/util/dateUtils.ts"),_GroupAvatar__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/messaging/master/GroupAvatar.tsx"),_data_stateCodes__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/data/stateCodes.ts"),shared_util_hookUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/util/hookUtils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ListConversation(props){const title=(0,shared_util_hookUtils__WEBPACK_IMPORTED_MODULE_2__.vU)(props.conversation),primaryStyle=props.highlighted?{color:"primary",sx:{fontSize:"1rem",fontWeight:"bold"}}:{sx:{fontSize:"1rem",fontWeight:500}},secondaryStyle=props.highlighted?{color:"textPrimary",sx:{fontWeight:"bold"}}:{};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.Z,{onClick:props.onSelected,selected:props.selected,sx:{marginX:1,marginY:.5,borderRadius:1,paddingX:1.5,paddingY:.5,"&&.Mui-selected, &&.Mui-selected:hover":{backgroundColor:"action.selected"},"&&:hover":{backgroundColor:"action.hover"}},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_4__.Z,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_GroupAvatar__WEBPACK_IMPORTED_MODULE_5__.Z,{members:props.conversation.members})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__.Z,{sx:{".MuiTypography-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},primary:title,primaryTypographyProps:primaryStyle,secondary:previewString(props.conversation.preview),secondaryTypographyProps:secondaryStyle}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_7__.Z,{sx:{alignSelf:"flex-start",paddingTop:1,paddingLeft:2,flexShrink:0},variant:"body2",color:"textSecondary",children:(0,_util_dateUtils__WEBPACK_IMPORTED_MODULE_8__.xs)(props.conversation.preview.date)})]},props.conversation.localID)}function previewString(preview){if((0,_util_conversationUtils__WEBPACK_IMPORTED_MODULE_9__.pN)(preview)){if(preview.sendStyle===_data_appleConstants__WEBPACK_IMPORTED_MODULE_10__.qU)return"Message sent with Invisible Ink";if(preview.text)return preview.text;if(preview.attachments.length)return 1===preview.attachments.length?_util_conversationUtils__WEBPACK_IMPORTED_MODULE_9__.mJ(preview.attachments[0]):`${preview.attachments.length} attachments`}else if(preview.type===_data_stateCodes__WEBPACK_IMPORTED_MODULE_11__.mZ.ChatCreation)return"New conversation created";return"Unknown"}ListConversation.displayName="ListConversation";try{ListConversation.displayName="ListConversation",ListConversation.__docgenInfo={description:"",displayName:"ListConversation",props:{conversation:{defaultValue:null,description:"",name:"conversation",required:!0,type:{name:"Conversation"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},highlighted:{defaultValue:null,description:"",name:"highlighted",required:!1,type:{name:"boolean"}},onSelected:{defaultValue:null,description:"",name:"onSelected",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/messaging/master/ListConversation.tsx#ListConversation"]={docgenInfo:ListConversation.__docgenInfo,name:"ListConversation",path:"src/components/messaging/master/ListConversation.tsx#ListConversation"})}catch(__react_docgen_typescript_loader_error){}},"./src/util/dateUtils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Be:()=>getTimeDivider,rO:()=>getDeliveryStatusTime,xs:()=>getLastUpdateStatusTime});var luxon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/luxon/src/luxon.js");function getLastUpdateStatusTime(date){const dateNow=new Date,timeDiff=dateNow.getTime()-date.getTime();if(timeDiff<6e4)return"Just now";if(timeDiff<36e5){return`${Math.floor(timeDiff/6e4)} min`}if(checkSameDay(date,dateNow))return luxon__WEBPACK_IMPORTED_MODULE_0__.ou.fromJSDate(date).toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_0__.ou.TIME_SIMPLE);if(compareDates(date,new Date(dateNow.getFullYear(),dateNow.getMonth(),dateNow.getDate()-7))>0)return luxon__WEBPACK_IMPORTED_MODULE_0__.ou.fromJSDate(date).toFormat("ccc");if(compareDates(date,new Date(dateNow.getFullYear()-1,dateNow.getMonth(),dateNow.getDate()))>0)return luxon__WEBPACK_IMPORTED_MODULE_0__.ou.fromJSDate(date).toFormat("LLL d");return luxon__WEBPACK_IMPORTED_MODULE_0__.ou.fromJSDate(date).toFormat("LLL yyyy")}function getTimeDivider(date){const dateNow=new Date,luxon=luxon__WEBPACK_IMPORTED_MODULE_0__.ou.fromJSDate(date),formattedTime=luxon.toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_0__.ou.TIME_SIMPLE);if(checkSameDay(date,dateNow))return formattedTime;if(checkSameDay(date,new Date(dateNow.getFullYear(),dateNow.getMonth(),dateNow.getDate()-1)))return"Yesterday • "+formattedTime;if(compareDates(date,new Date(dateNow.getFullYear(),dateNow.getMonth(),dateNow.getDate()-7))>0)return luxon.toFormat("cccc")+" • "+formattedTime;if(compareDates(date,new Date(dateNow.getFullYear()-1,dateNow.getMonth(),dateNow.getDate()))>0)return luxon.toFormat("cccc, LLLL d")+" • "+formattedTime;return luxon.toFormat("LLLL d, yyyy")+" • "+formattedTime}function getDeliveryStatusTime(date){const dateNow=new Date,luxon=luxon__WEBPACK_IMPORTED_MODULE_0__.ou.fromJSDate(date),formattedTime=luxon.toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_0__.ou.TIME_SIMPLE);if(checkSameDay(date,dateNow))return formattedTime;if(checkSameDay(date,new Date(dateNow.getFullYear(),dateNow.getMonth(),dateNow.getDate()-1)))return"Yesterday";if(compareDates(date,new Date(dateNow.getFullYear(),dateNow.getMonth(),dateNow.getDate()-7))>0)return luxon.toFormat("cccc");if(compareDates(date,new Date(dateNow.getFullYear()-1,dateNow.getMonth(),dateNow.getDate()))>0)return luxon.toFormat("LLL d");return luxon.toFormat("LLL d, yyyy")+" • "+formattedTime}function checkSameDay(date1,date2){return date1.getFullYear()===date2.getFullYear()&&date1.getMonth()===date2.getMonth()&&date1.getDate()===date2.getDate()}function compareDates(date1,date2){return date1.getFullYear()<date2.getFullYear()?-1:date1.getFullYear()>date2.getFullYear()?1:date1.getMonth()<date2.getMonth()?-1:date1.getMonth()>date2.getMonth()?1:date1.getDate()<date2.getDate()?-1:date1.getDate()>date2.getDate()?1:0}}}]);